<!--****************************************************************************
                            ç¬¬å…­ç«  ç½‘é¡µä¸Šçš„è¾“å…¥è¾“å‡º
*****************************************************************************-->
<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8">
  <title>section6_basic</title>

  <script>
    // é€šè¿‡DOMç™»é™†
    window.onload = function() {
      var button = document.getElementById('eventSample');
      button.onclick = eventSample;


      var timeoutButton = document.getElementById('timeout');
      timeoutButton.onclick = function (){
        let timer = setTimeout(timeoutSample, 1000);
      }

      var intervalButton = document.getElementById('setInterval');
      let timer = null
      intervalButton.onclick = function() {
        timer = setInterval(
          function () {
            alert('é—´éš”è¿è¡Œå¼€å§‹');
          }, 2000
        )
      };


      var clearIntervalButton = document.getElementById('clearInterval');
      clearIntervalButton.onclick = function () {
        clearInterval(timer);
      };

      let readFormSample = document.getElementById('read-form-sample');
      readFormSample.onclick = getFormInputSample;

      //6.4
      // TODO: fix restart
      // TODO: å‡å°‘fragï¼Œç›´æ¥æŠŠäº‹ä»¶å±è”½
      let startTimerButton = document.getElementById('startTimer');
      let stopTimerButton = document.getElementById('stopTimer');
      let clearTimerButton = document.getElementById('clearTimer');
      let timerOutput = document.getElementById('timerOutput');
      let startTime;
      let countDown;
      let isStarted = false;
      let isNeedNewStartTime = true;
      let isFromRestart = false;
      let stopTime = false;
      startTimerButton.onclick = startTimer;
      stopTimerButton.onclick = function () {
        clearInterval(countDown);
        isStarted = false;
        isFromRestart = true;
        stopTime = new Date();
      };
      clearTimerButton.onclick = function () {
        clearInterval(countDown);
        isStarted = false;
        startTime = null;
        isNeedNewStartTime = true;
        timerOutput.innerHTML = 'æœªå¼€å§‹';
      };

      function startTimer() {
        if (isStarted === false) {
          if (isNeedNewStartTime) {
            startTime = new Date();
            isNeedNewStartTime = false;
          }else if (isFromRestart === true) {
            isFromRestart = false;
            let restartTime = new Date();
            let temp = restartTime - stopTime;
            startTime = startTime + temp;

          }
          countDown = setInterval(
            function() {
              let now = new Date();
              timerOutput.innerHTML = ((now - startTime)/1000).toFixed(2);
          }, 10);
          isStarted = true;
        }
      }

      let BMI_Button = document.getElementById('BMI-get-result');
      BMI_Button.onclick = getBMIResult;

    }
    // -------------------------------------------------------
    //                    6.1 dialog
    // -------------------------------------------------------
    // alert, confirm, prompt
    function dialogTest() {
      if (confirm("è¦å¼€å§‹6.1 dialogçš„æ¨¡æ¿å’©ğŸ˜³")) {
        alert("è¿™æ˜¯ä¸€ä¸ªalert")
        let name = prompt("è¯´ç‚¹å•¥å•Šå¤§ä½¬ğŸ˜³ğŸ˜„ğŸ˜‚", "ğŸ˜³");
        let result = confirm(name + "æ˜¯ä½ å’©ğŸ˜³ ");
        if (result === true) {
          alert("ä½ æ˜¯ã€" + name + "ã€‘ğŸ˜Š");
        }else {
          alert("sbæ»šğŸ˜’");
        }
      }else {
        alert("ä¸å¼€å§‹è¿˜ç‚¹å¼€æˆ‘å¹²å˜›ğŸ˜’");
      }
    }
    // -------------------------------------------------------
    //                    6.2 console
    // -------------------------------------------------------
    function Sample(name, age) {
      this.name = name;
      this.age = age;
    }

    function consoleTest() {
      let a = new Sample("äººé€ äººä¸€å·", 999);
      console.dir(a);
      console.log("this is console", "log");
      console.info("this is console", "info");
      console.warn("this is console", "warn");
      console.error("this is console", "error");
      console.log(a["name"]);
      console.log(a.name);

      let timerStr = "96A5C9C6-6D20-4036-A1B8-F136EECC8879";
      console.time(timerStr);
      alert("è®¡æ—¶å™¨å·²å¼€å§‹");
      console.timeEnd(timerStr);
    }
    // -------------------------------------------------------
    //                 6.3 äº‹ä»¶ç™»é™†ä¸è®¡æ—¶å™¨
    // -------------------------------------------------------
    // é€šè¿‡HTMLç›´æ¥ç™»é™†
    function eventSample() {
      alert("æ­å–œï¼ä½ æˆåŠŸç™»è®°äº†äº‹ä»¶ï¼ğŸ˜Š");
    }
    // // é€šè¿‡DOMç™»é™†
    // window.onload = function() {
    //   var button = document.getElementById('eventSample');
    //   button.onclick = eventSample;
    //
    //
    //   var timeoutButton = document.getElementById('timeout');
    //   timeoutButton.onclick = function (){
    //     let timer = setTimeout(timeoutSample, 1000);
    //   }
    //
    //   var intervalButton = document.getElementById('setInterval');
    //   let timer = null
    //   intervalButton.onclick = function() {
    //     timer = setInterval(
    //       function () {
    //         alert('é—´éš”è¿è¡Œå¼€å§‹');
    //       }, 2000
    //     )
    //   };
    //
    //
    //   var clearIntervalButton = document.getElementById('clearInterval');
    //   clearIntervalButton.onclick = function () {
    //     clearInterval(timer);
    //   };
    // }

    function timeoutSample() {
      alert("æ­å–œï¼ä½ æˆåŠŸè¿è¡Œäº†è¿Ÿå»¶äº‹ä»¶ï¼ğŸ˜Š");
    }

    // -------------------------------------------------------
    //                 6.4 åŠ¨æ€è¯»å†™htmlå…ƒç´ 
    // -------------------------------------------------------
    function getFormInputSample() {
      let formSample = document.getElementById('checkbox-sample');
      console.log("name", formSample.name, "value", formSample.value, 'checked', formSample.checked);
      alert("name: " + formSample.name + "\nvalue: " + formSample.value + '\nchecked: ' + formSample.checked);
    }

    function getBMIResult() {
      let weight = document.getElementById('BMI-weight').value;
      let height = document.getElementById('BMI-height').value/100;
      let outputArea = document.getElementById('BMI-result')
      let temp = (weight/(height*height)).toFixed(1);
      outputArea.innerHTML = temp;
    }

    // -------------------------------------------------------
    //                 6.5 é€šè¿‡canvasçš„å‡ ä½•ç»˜å›¾
    // -------------------------------------------------------
    // TODO: è¡¥å……6.5
  </script>
</head>

<body style="background-color: gray;">
  <div class="mainBody" style="margin: auto; text-align: center;">
    <!--*********************************************
                     6.1 dialog
    **********************************************-->
    <h1>6.1 dialog</h1>
    <input type="button" value="6.1 dialog" onclick="dialogTest()">
    <!--*********************************************
                     6.2 console
    **********************************************-->
    <h1>6.2 console</h1>
    <input type="button" value="6.2 console" onclick="consoleTest()">
    <!--*********************************************
                     6.3 äº‹ä»¶ç™»é™†
    **********************************************-->
    <h1>6.3 äº‹ä»¶ç™»é™†</h1>
    <!-- é€šè¿‡HTMLç›´æ¥ç™»é™† -->
    <input type="button" value="ç™»é™†äº‹ä»¶çš„æµ‹è¯•" onclick="eventSample()">
    <p onclick="eventSample()" style="border: 2px solid red;">çœ‹çœ‹å¯ä¸å¯ä»¥å¯¹è¿™ä¸ªè¿›è¡Œäº‹ä»¶ç™»é™†</p>

    <!-- é€šè¿‡DOMç™»é™† -->
    <p style="border: 2px solid red;" id="eventSample">æµ‹è¯•ä¸€ä¸‹</p>

    <!-- timer -->
    <input type="button" value="è¿‡ä¸€ä¼šå„¿æ‰ä¼šè¿è¡Œ" id="timeout">
    <input type="button" value="é—´éš”ä¸€ä¼šå„¿è¿è¡Œ" id="setInterval">
    <input type="button" value="å–æ¶ˆé—´éš”è¿è¡Œ" id="clearInterval">

    <!--*********************************************
                   6.4 åŠ¨æ€è¯»å†™htmlå…ƒç´ 
    **********************************************-->
    <h1>6.4 åŠ¨æ€è¯»å†™htmlå…ƒç´ </h1>
    <p id="timerOutput" style="margin: auto; width: 30%; border: solid 1px blue; text-align: center; margin-top: 10px; margin-bottom: 10px;">æœªå¼€å§‹</p>
    <input type="button" value="å¼€å§‹è®¡æ—¶" id="startTimer">
    <input type="button" value="åœæ­¢" id="stopTimer">
    <input type="button" value="æ¸…é›¶" id="clearTimer">

    <p>è¯»å–formçš„è¾“å…¥å€¼ç­‰</p>
    <input type="checkbox" id="checkbox-sample" name="UUID-123" value="UUID-456">
    <input type="button" value="åœæ­¢" id="read-form-sample">

    <p>BMIè®¡ç®—å™¨</p>
    <p>èº«é«˜<input type="number" id="BMI-height">cm</P>
    <p>ä½“é‡<input type="number" id="BMI-weight">kg</p>
    <input type="button" id="BMI-get-result" value="è®¡ç®—BMI">
    <p id="BMI-result">?</p>

    <!-- document.write test -->
    <script>
      document.write('<p style="color:blue;">!?!?!?!?!?</P>')
    </script>
  </div>

</body>
</html>
